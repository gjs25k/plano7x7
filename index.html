<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dom Barbeiro | Agendamento</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: '#D4AF37',
                        dark: '#121212',
                        surface: '#1E1E1E',
                        highlight: '#2A2A2A'
                    },
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                        display: ['Oswald', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar Hide */
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Smooth Fade In */
        .fade-in { animation: fadeIn 0.5s ease-out forwards; opacity: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Selection Ring Animation */
        .selected-ring { box-shadow: 0 0 0 2px #D4AF37; transform: scale(1.02); }
        
        /* Glass effect for sticky footer */
        .glass-footer {
            background: rgba(18, 18, 18, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="bg-dark text-gray-200 font-sans antialiased pb-32">

    <!-- HERO SECTION -->
    <header class="relative h-48 bg-surface overflow-hidden">
        <img src="fundo.png" onerror="this.src='https://picsum.photos/800/400?grayscale'" class="absolute inset-0 w-full h-full object-cover opacity-30" alt="Background">
        <div class="absolute inset-0 bg-gradient-to-b from-transparent to-dark"></div>
        <div class="relative z-10 flex flex-col items-center justify-center h-full px-4 text-center">
            <img src="logo.png" onerror="this.style.display='none'" class="h-16 mb-2 rounded-full border-2 border-gold shadow-lg" alt="Logo">
            <h1 class="text-3xl font-display font-bold text-white tracking-wide">DOM BARBEIRO</h1>
            <p class="text-gold text-sm tracking-widest uppercase mt-1">Estilo & Tradi√ß√£o</p>
            <div class="flex items-center gap-2 mt-3 text-xs text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                <span>Rua das Flores, 123</span>
            </div>
        </div>
    </header>

    <!-- MAIN APP CONTAINER -->
    <main class="max-w-md mx-auto px-4 -mt-6 relative z-20 space-y-8">

        <!-- 1. PROFISSIONAIS -->
        <section id="step-professional" class="fade-in" style="animation-delay: 0.1s;">
            <h2 class="text-white font-display text-lg mb-3 flex items-center gap-2">
                <span class="bg-gold text-dark w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold">1</span>
                ESCOLHA O PROFISSIONAL
            </h2>
            <div class="grid grid-cols-2 gap-4" id="professionals-container">
                <!-- Injected via JS -->
            </div>
        </section>

        <!-- 2. SERVI√áOS -->
        <section id="step-service" class="fade-in opacity-50 pointer-events-none transition-all duration-300" style="animation-delay: 0.2s;">
            <h2 class="text-white font-display text-lg mb-3 flex items-center gap-2">
                <span class="bg-gold text-dark w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold">2</span>
                SELECIONE O SERVI√áO
            </h2>
            <div class="space-y-3" id="services-container">
                <!-- Injected via JS -->
            </div>
        </section>

        <!-- 3. DATA -->
        <section id="step-date" class="fade-in opacity-50 pointer-events-none transition-all duration-300" style="animation-delay: 0.3s;">
            <h2 class="text-white font-display text-lg mb-3 flex items-center gap-2">
                <span class="bg-gold text-dark w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold">3</span>
                ESCOLHA A DATA
            </h2>
            <div class="flex overflow-x-auto gap-3 pb-2 hide-scroll" id="dates-container">
                <!-- Injected via JS -->
            </div>
        </section>

        <!-- 4. HOR√ÅRIO -->
        <section id="step-time" class="fade-in opacity-50 pointer-events-none transition-all duration-300" style="animation-delay: 0.4s;">
            <h2 class="text-white font-display text-lg mb-3 flex items-center gap-2">
                <span class="bg-gold text-dark w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold">4</span>
                HOR√ÅRIO DISPON√çVEL
            </h2>
            <div class="grid grid-cols-4 gap-2" id="times-container">
                <p class="col-span-4 text-gray-500 text-sm italic py-2">Selecione uma data e servi√ßo para ver os hor√°rios.</p>
            </div>
        </section>

    </main>

    <!-- STICKY FOOTER -->
    <footer class="fixed bottom-0 left-0 right-0 glass-footer border-t border-white/10 p-4 z-50 transition-transform duration-300 translate-y-full" id="booking-footer">
        <div class="max-w-md mx-auto">
            <div class="flex justify-between items-end mb-3 text-sm">
                <div class="flex flex-col">
                    <span class="text-gray-400 text-xs">RESUMO DO AGENDAMENTO</span>
                    <strong class="text-white text-lg" id="summary-price">R$ 0,00</strong>
                </div>
                <div class="text-right">
                    <div id="summary-date" class="text-gold font-bold">--/--</div>
                    <div id="summary-time" class="text-gray-300 text-xs">--:--</div>
                </div>
            </div>
            <button onclick="sendToWhatsApp()" class="w-full bg-gold hover:bg-yellow-600 text-dark font-bold font-display uppercase tracking-wider py-4 rounded-lg shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-8.683-2.031-.967-.272-.099-.47-.149-.669.198-.199.347-.769.967-.943 1.165-.173.199-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.017-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                SOLICITAR AGENDAMENTO
            </button>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- CONFIGURA√á√ÉO DO NEG√ìCIO ---
        const businessConfig = {
            name: "Dom Barbeiro",
            phone: "5511999999999", // Coloque o n√∫mero real aqui
            openHour: 9,
            closeHour: 20,
            daysOff: [0] // 0 = Domingo, 6 = S√°bado. Ex: [0] fecha domingo
        };

        const professionals = [
            { id: 1, name: "Carlos", photo: "barbeiro1.png" },
            { id: 2, name: "Rafael", photo: "barbeiro2.png" }
        ];

        const services = [
            { id: 1, name: "Corte Degrade", price: 35.00, duration: 40, photo: "corte.png" },
            { id: 2, name: "Barba Terapia", price: 25.00, duration: 30, photo: "barba.png" },
            { id: 3, name: "Combo Completo", price: 55.00, duration: 60, photo: "combo.png" }
        ];

        // --- ESTADO DA APLICA√á√ÉO ---
        let selectedState = {
            professional: null,
            service: null,
            date: null,
            time: null
        };

        // --- INICIALIZA√á√ÉO ---
        document.addEventListener('DOMContentLoaded', () => {
            renderProfessionals();
            renderServices();
            renderDates();
        });

        // --- FUN√á√ïES DE RENDERIZA√á√ÉO ---

        function renderProfessionals() {
            const container = document.getElementById('professionals-container');
            container.innerHTML = professionals.map(prof => `
                <div onclick="selectProfessional(${prof.id})" id="prof-${prof.id}" class="cursor-pointer bg-surface rounded-xl p-3 border border-white/5 hover:border-gold/50 transition-all group relative overflow-hidden">
                    <div class="absolute inset-0 bg-gold/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    <img src="${prof.photo}" onerror="this.src='https://picsum.photos/150/150?random=${prof.id}'" class="w-16 h-16 rounded-full mx-auto mb-2 object-cover border-2 border-gray-700 group-hover:border-gold transition-colors">
                    <h3 class="text-center font-display text-white group-hover:text-gold transition-colors">${prof.name}</h3>
                </div>
            `).join('');
        }

        function renderServices() {
            const container = document.getElementById('services-container');
            container.innerHTML = services.map(svc => `
                <div onclick="selectService(${svc.id})" id="svc-${svc.id}" class="cursor-pointer bg-surface rounded-xl p-4 flex items-center justify-between border border-white/5 hover:border-gold/50 transition-all group">
                    <div class="flex items-center gap-3">
                        <img src="${svc.photo}" onerror="this.src='https://picsum.photos/100/100?random=${svc.id + 10}'" class="w-12 h-12 rounded-lg object-cover bg-dark">
                        <div>
                            <h3 class="font-display text-white group-hover:text-gold transition-colors">${svc.name}</h3>
                            <p class="text-xs text-gray-500">${svc.duration} min ‚Ä¢ Detalhado</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="block text-gold font-bold">R$ ${svc.price.toFixed(2).replace('.', ',')}</span>
                        <div class="w-4 h-4 rounded-full border border-gray-600 ml-auto mt-1 group-hover:bg-gold group-hover:border-gold transition-colors flex items-center justify-center">
                            <div class="w-2 h-2 bg-dark rounded-full opacity-0 group-hover:opacity-100"></div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderDates() {
            const container = document.getElementById('dates-container');
            const today = new Date();
            const days = ['DOM', 'SEG', 'TER', 'QUA', 'QUI', 'SEX', 'S√ÅB'];
            let html = '';

            for (let i = 0; i < 7; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                const dayOfWeek = date.getDay();
                // Pular dias de folga
                if (businessConfig.daysOff.includes(dayOfWeek)) continue;

                const dayStr = days[dayOfWeek];
                const dateStr = date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
                const fullDate = date.toISOString().split('T')[0]; // YYYY-MM-DD

                html += `
                    <div onclick="selectDate('${fullDate}', '${dayStr} ${dateStr}', this)" class="date-card cursor-pointer min-w-[80px] bg-surface rounded-xl p-3 flex flex-col items-center border border-white/5 hover:border-gold/50 transition-all flex-shrink-0 group">
                        <span class="text-xs text-gray-400 font-bold mb-1 group-hover:text-gold">${dayStr}</span>
                        <span class="text-lg text-white font-display font-bold">${dateStr.split('/')[0]}</span>
                        <span class="text-[10px] text-gray-500">${dateStr.split('/')[1]}</span>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        function renderTimeSlots() {
            const container = document.getElementById('times-container');
            
            if (!selectedState.service) {
                container.innerHTML = '<p class="col-span-4 text-gray-500 text-sm italic py-2">Selecione um servi√ßo primeiro.</p>';
                return;
            }

            const serviceDuration = services.find(s => s.id === selectedState.service).duration;
            const startMinutes = businessConfig.openHour * 60;
            const endMinutes = businessConfig.closeHour * 60;
            
            let current = startMinutes;
            let html = '';

            while (current + serviceDuration <= endMinutes) {
                const h = Math.floor(current / 60);
                const m = current % 60;
                const timeLabel = `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}`;
                
                html += `
                    <button onclick="selectTime('${timeLabel}', this)" class="time-slot bg-surface hover:bg-highlight border border-white/10 text-white text-sm py-2 rounded-lg transition-all focus:outline-none">
                        ${timeLabel}
                    </button>
                `;
                
                // Intervalo inteligente: soma a dura√ß√£o do servi√ßo
                current += serviceDuration; 
            }
            
            container.innerHTML = html;
        }

        // --- L√ìGICA DE SELE√á√ÉO ---

        function selectProfessional(id) {
            selectedState.professional = id;
            
            // UI Update
            document.querySelectorAll('#professionals-container > div').forEach(el => el.classList.remove('selected-ring', 'bg-highlight'));
            const card = document.getElementById(`prof-${id}`);
            card.classList.add('selected-ring', 'bg-highlight');

            unlockSection('step-service');
            updateFooter();
        }

        function selectService(id) {
            selectedState.service = id;
            selectedState.time = null; // Reset time if service changes (duration changes)
            
            // UI Update
            document.querySelectorAll('#services-container > div').forEach(el => {
                el.classList.remove('border-gold', 'bg-highlight');
                el.querySelector('.w-4').classList.remove('bg-gold', 'border-gold');
                el.querySelector('.w-2').classList.add('opacity-0');
            });
            const card = document.getElementById(`svc-${id}`);
            card.classList.add('border-gold', 'bg-highlight');
            card.querySelector('.w-4').classList.add('bg-gold', 'border-gold');
            card.querySelector('.w-2').classList.remove('opacity-0');

            unlockSection('step-date');
            
            // If date is already selected, re-render times because duration changed
            if (selectedState.date) {
                renderTimeSlots();
                unlockSection('step-time');
            }
            
            updateFooter();
        }

        function selectDate(isoDate, displayDate, element) {
            selectedState.date = displayDate;
            
            // UI Update
            document.querySelectorAll('.date-card').forEach(el => el.classList.remove('bg-gold', 'text-dark', 'border-gold'));
            // Remove text classes from children to avoid conflict when parent is active
            document.querySelectorAll('.date-card span').forEach(el => el.classList.remove('text-dark'));
            
            element.classList.remove('bg-surface', 'text-white');
            element.classList.add('bg-gold', 'text-dark', 'border-gold', 'selected-ring');
            
            // Set children colors for contrast
            const spans = element.querySelectorAll('span');
            spans.forEach(s => {
                s.classList.remove('text-gray-400', 'text-gray-500', 'text-white');
                s.classList.add('text-dark');
            });

            unlockSection('step-time');
            renderTimeSlots();
            updateFooter();
        }

        function selectTime(time, element) {
            selectedState.time = time;
            
            // UI Update
            document.querySelectorAll('.time-slot').forEach(el => el.classList.remove('bg-gold', 'text-dark', 'font-bold'));
            element.classList.remove('bg-surface', 'text-white');
            element.classList.add('bg-gold', 'text-dark', 'font-bold');

            showFooter();
            updateFooter();
        }

        // --- AUXILIARES UI ---

        function unlockSection(id) {
            const section = document.getElementById(id);
            section.classList.remove('opacity-50', 'pointer-events-none');
        }

        function showFooter() {
            document.getElementById('booking-footer').classList.remove('translate-y-full');
        }

        function updateFooter() {
            if (selectedState.service) {
                const svc = services.find(s => s.id === selectedState.service);
                document.getElementById('summary-price').innerText = `R$ ${svc.price.toFixed(2).replace('.', ',')}`;
            }
            
            if (selectedState.date) {
                document.getElementById('summary-date').innerText = selectedState.date;
            }
            
            if (selectedState.time) {
                document.getElementById('summary-time').innerText = selectedState.time;
            }
        }

        // --- FINALIZA√á√ÉO ---

        function sendToWhatsApp() {
            if (!selectedState.professional || !selectedState.service || !selectedState.date || !selectedState.time) {
                alert("Por favor, selecione todas as op√ß√µes.");
                return;
            }

            const prof = professionals.find(p => p.id === selectedState.professional);
            const svc = services.find(s => s.id === selectedState.service);

            // Construct Message
            // Usando Unicode Escapes para garantir que os emojis funcionem
            // independente da codifica√ß√£o do arquivo.
            // üíà = \uD83D\uDC88
            // ‚úÇÔ∏è = \u2702\uFE0F
            // üí∞ = \uD83D\uDCB0
            // üìÖ = \uD83D\uDCC5
            // ‚è∞ = \u23F0
            
            const text = `*NOVO AGENDAMENTO*\n\n` +
                `\uD83D\uDC88 *Barbeiro:* ${prof.name}\n` +
                `\u2702\uFE0F *Servi√ßo:* ${svc.name}\n` +
                `\uD83D\uDCB0 *Valor:* R$ ${svc.price.toFixed(2).replace('.', ',')}\n` +
                `\uD83D\uDCC5 *Data:* ${selectedState.date}\n` +
                `\u23F0 *Hor√°rio:* ${selectedState.time}\n\n` +
                `_Gostaria de confirmar este hor√°rio?_`;

            const url = `https://wa.me/${businessConfig.phone}?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
